
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>cfdm.read &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/customise-alabaster.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/toggleprompt.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cfdm.write" href="cfdm.write.html" />
    <link rel="prev" title="cfdm functions" href="../functions.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">



<h1 class="logo"><a href="../index.html">cfdm 1.12.0.0</a></h1>



<p class="blurb">A Python reference implementation of the CF data model</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NCAS-CMS&repo=cfdm&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf_data_model.html"><strong>CF data model</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html"><strong>Contributing</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../philosophy.html"><strong>Philosophy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html"><strong>Extensions</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../functions.html"><strong>cfdm functions</strong></a><ul>
      <li>Previous: <a href="../functions.html" title="previous chapter"><strong>cfdm functions</strong></a></li>
      <li>Next: <a href="cfdm.write.html" title="next chapter">cfdm.write</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>

<br>
cfdm development has been supported by
the <a href="https://erc.europa.eu/">ERC</a>
through <a href="https://cordis.europa.eu/project/id/786427">Couplet</a>;
by the <a href="https://ec.europa.eu/programmes/horizon2020/">EC
Horizon 2020 programme</a> through
<a href="https://cordis.europa.eu/project/id/824084">IS-ENES3</a>;
by <a href="https://nerc.ukri.org/">NERC</a> through
<a href="https://gtr.ukri.org/project/0D95A6DB-0B95-48F7-8A8B-7B9A47DEA117">UKFAFMIP</a>;
and by <a href="https://ncas.ac.uk/">NCAS</a>.
<br>
<br>
<img src="../_templates/logo_EC.png" height="40">
<img src="../_templates/logo_ERC.png" height="40">
<img src="../_templates/logo_NERC.png" height="40">
<br>
<img src="../_templates/logo_NCAS.png" height="40">
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            


  <section id="cfdm-read">
<h1>cfdm.read<a class="headerlink" href="#cfdm-read" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="cfdm.read">
<code class="sig-prename descclassname">cfdm.</code><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">external=None</em>, <em class="sig-param">extra=None</em>, <em class="sig-param">verbose=None</em>, <em class="sig-param">warnings=False</em>, <em class="sig-param">warn_valid=False</em>, <em class="sig-param">mask=True</em>, <em class="sig-param">unpack=True</em>, <em class="sig-param">domain=False</em>, <em class="sig-param">netcdf_backend=None</em>, <em class="sig-param">storage_options=None</em>, <em class="sig-param">cache=True</em>, <em class="sig-param">dask_chunks='storage-aligned'</em>, <em class="sig-param">store_dataset_chunks=True</em>, <em class="sig-param">cfa=None</em>, <em class="sig-param">cfa_write=None</em>, <em class="sig-param">to_memory=False</em>, <em class="sig-param">squeeze=False</em>, <em class="sig-param">unsqueeze=False</em>, <em class="sig-param">file_type=None</em>, <em class="sig-param">ignore_unknown_type=False</em>, <em class="sig-param">extra_read_vars=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cfdm/blob/v1.12.0.0/cfdm/read_write/read.py#L11-L289"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cfdm.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read field or domain constructs from a dataset.</p>
<p>The following file formats are supported: netCDF and CDL.</p>
<p>NetCDF files may be on local disk, on an OPeNDAP server, or in an
S3 object store.</p>
<p>The returned constructs are sorted by the netCDF variable names of
their corresponding data or domain variables.</p>
<p><strong>CDL files</strong></p>
<p>A file is considered to be a CDL representation of a netCDF
dataset if it is a text file whose first non-comment line starts
with the seven characters “netcdf ” (six letters followed by a
space). A comment line is identified as one which starts with any
amount white space (including none) followed by “//” (two
slashes). It is converted to a temporary netCDF4 file using the
external <code class="docutils literal notranslate"><span class="pre">ncgen</span></code> command, and the temporary file persists until
the end of the Python session, at which time it is automatically
deleted. The CDL file may omit data array values (as would be the
case, for example, if the file was created with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> or
<code class="docutils literal notranslate"><span class="pre">-c</span></code> option to <code class="docutils literal notranslate"><span class="pre">ncdump</span></code>), in which case the the relevant
constructs in memory will be created with data with all missing
values.</p>
<p><strong>NetCDF unlimited dimensions</strong></p>
<p>Domain axis constructs that correspond to NetCDF unlimited
dimensions may be accessed with the
<a class="reference internal" href="../method/cfdm.DomainAxis.nc_is_unlimited.html#cfdm.DomainAxis.nc_is_unlimited" title="cfdm.DomainAxis.nc_is_unlimited"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nc_is_unlimited</span></code></a> and
<a class="reference internal" href="../method/cfdm.DomainAxis.nc_set_unlimited.html#cfdm.DomainAxis.nc_set_unlimited" title="cfdm.DomainAxis.nc_set_unlimited"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nc_set_unlimited</span></code></a> methods of a domain
axis construct.</p>
<p><strong>NetCDF hierarchical groups</strong></p>
<p>Hierarchical groups in CF provide a mechanism to structure
variables within netCDF4 datasets. Field constructs are
constructed from grouped datasets by applying the well defined
rules in the CF conventions for resolving references to
out-of-group netCDF variables and dimensions. The group structure
is preserved in the field construct’s netCDF interface. Groups
were incorporated into CF-1.8. For files with groups that state
compliance to earlier versions of the CF conventions, the groups
will be interpreted as per the latest release of the CF
conventions.</p>
<p><strong>CF-compliance</strong></p>
<p>If the dataset is partially CF-compliant to the extent that it is
not possible to unambiguously map an element of the netCDF dataset
to an element of the CF data model, then a field construct is
still returned, but may be incomplete. This is so that datasets
which are partially conformant may nonetheless be modified in
memory and written to new datasets.</p>
<p>Such “structural” non-compliance would occur, for example, if the
“coordinates” attribute of a CF-netCDF data variable refers to
another variable that does not exist, or refers to a variable that
spans a netCDF dimension that does not apply to the data
variable. Other types of non-compliance are not checked, such
whether or not controlled vocabularies have been adhered to. The
structural compliance of the dataset may be checked with the
<a class="reference internal" href="../method/cfdm.Field.dataset_compliance.html#cfdm.Field.dataset_compliance" title="cfdm.Field.dataset_compliance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dataset_compliance</span></code></a> method of the returned
constructs, as well as optionally displayed when the dataset is
read by setting the <em>warnings</em> parameter.</p>
<p><strong>Performance</strong></p>
<p>Descriptive properties are always read into memory, but lazy
loading is employed for all data arrays, unless the <em>to_memory</em>
parameter has been set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.7.0</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cfdm.write.html#cfdm.write" title="cfdm.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.write</span></code></a>, <a class="reference internal" href="../class/cfdm.Field.html#cfdm.Field" title="cfdm.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.Field</span></code></a>,
<a class="reference internal" href="../class/cfdm.Domain.html#cfdm.Domain" title="cfdm.Domain"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.Domain</span></code></a>, <a class="reference internal" href="cfdm.unique_constructs.html#cfdm.unique_constructs" title="cfdm.unique_constructs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.unique_constructs</span></code></a></p>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt>filename: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>The file name or OPenDAP URL of the dataset.</p>
<p>Relative paths are allowed, and standard tilde and shell
parameter expansions are applied to the string.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p>The file <code class="docutils literal notranslate"><span class="pre">file.nc</span></code> in the user’s home directory could
be described by any of the following:
<code class="docutils literal notranslate"><span class="pre">'$HOME/file.nc'</span></code>, <code class="docutils literal notranslate"><span class="pre">'${HOME}/file.nc'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'~/file.nc'</span></code>, <code class="docutils literal notranslate"><span class="pre">'~/tmp/../file.nc'</span></code>.</p>
</dd>
</dl>
</dd>
<dt>external: (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><p>Read external variables (i.e. variables which are named by
attributes, but are not present, in the parent file given
by the <em>filename</em> parameter) from the given external
files. Ignored if the parent file does not contain a
global <code class="docutils literal notranslate"><span class="pre">external_variables</span></code> attribute. Multiple external
files may be provided, which are searched in random order
for the required external variables.</p>
<p>If an external variable is not found in any external
files, or is found in multiple external files, then the
relevant metadata construct is still created, but without
any metadata or data. In this case the construct’s
<code class="xref py py-obj docutils literal notranslate"><span class="pre">is_external</span></code> method will return <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">external='cell_measure.nc'</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">external=['cell_measure.nc']</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">external=('cell_measure_A.nc',</span> <span class="pre">'cell_measure_O.nc')</span></code></p>
</dd>
</dl>
</dd>
<dt>extra: (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><p>Create extra, independent fields from netCDF variables
that correspond to particular types of metadata constructs.
Ignored if <em>domain</em> is True.</p>
<p>The <em>extra</em> parameter may be one, or a sequence, of:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>extra</em></p></th>
<th class="head"><p>Metadata constructs</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'field_ancillary'</span></code></p></td>
<td><p>Field ancillary constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'domain_ancillary'</span></code></p></td>
<td><p>Domain ancillary constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'dimension_coordinate'</span></code></p></td>
<td><p>Dimension coordinate constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'auxiliary_coordinate'</span></code></p></td>
<td><p>Auxiliary coordinate constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'cell_measure'</span></code></p></td>
<td><p>Cell measure constructs</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p>To create fields from auxiliary coordinate constructs:
<code class="docutils literal notranslate"><span class="pre">extra='auxiliary_coordinate'</span></code> or
<code class="docutils literal notranslate"><span class="pre">extra=['auxiliary_coordinate']</span></code>.</p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p>To create fields from domain ancillary and cell measure
constructs: <code class="docutils literal notranslate"><span class="pre">extra=['domain_ancillary',</span>
<span class="pre">'cell_measure']</span></code>.</p>
</dd>
</dl>
<p>An extra field construct created via the <em>extra</em> parameter
will have a domain limited to that which can be inferred
from the corresponding netCDF variable, but without the
connections that are defined by the parent netCDF data
variable. It is possible to create independent fields from
metadata constructs that do incorporate as much of the
parent field construct’s domain as possible by using the
<a class="reference internal" href="../method/cfdm.Field.convert.html#cfdm.Field.convert" title="cfdm.Field.convert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert</span></code></a> method of a returned field
construct, instead of setting the <em>extra</em> parameter.</p>
</dd>
<dt>verbose: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>If an integer from <code class="docutils literal notranslate"><span class="pre">-1</span></code> to <code class="docutils literal notranslate"><span class="pre">3</span></code>, or an equivalent string
equal ignoring case to one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'DISABLE'</span></code> (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'WARNING'</span></code> (<code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'INFO'</span></code> (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'DETAIL'</span></code> (<code class="docutils literal notranslate"><span class="pre">3</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'DEBUG'</span></code> (<code class="docutils literal notranslate"><span class="pre">-1</span></code>)</p></li>
</ul>
<p>set for the duration of the method call only as the
minimum cut-off for the verboseness level of displayed
output (log) messages, regardless of the
globally-configured <a class="reference internal" href="cfdm.log_level.html#cfdm.log_level" title="cfdm.log_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.log_level</span></code></a>.  Note that
increasing numerical value corresponds to increasing
verbosity, with the exception of <code class="docutils literal notranslate"><span class="pre">-1</span></code> as a special case
of maximal and extreme verbosity.</p>
<p>Otherwise, if <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default value), output messages
will be shown according to the value of the
<a class="reference internal" href="cfdm.log_level.html#cfdm.log_level" title="cfdm.log_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.log_level</span></code></a> setting.</p>
<p>Overall, the higher a non-negative integer or equivalent string
that is set (up to a maximum of <code class="docutils literal notranslate"><span class="pre">3</span></code>/<code class="docutils literal notranslate"><span class="pre">'DETAIL'</span></code>) for
increasing verbosity, the more description that is printed to
convey how the contents of the netCDF file were parsed and
mapped to CF data model constructs.</p>
</dd>
<dt>warnings: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then print warnings when an output field construct
is incomplete due to structural non-compliance of the
dataset. By default such warnings are not displayed.</p>
</dd>
<dt>warn_valid: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then print a warning for the presence of
<code class="docutils literal notranslate"><span class="pre">valid_min</span></code>, <code class="docutils literal notranslate"><span class="pre">valid_max</span></code> or <code class="docutils literal notranslate"><span class="pre">valid_range</span></code> properties
on field constructs and metadata constructs that have
data. By default no such warning is issued.</p>
<p>“Out-of-range” data values in the file, as defined by any
of these properties, are automatically masked by default,
which may not be as intended. See the <em>mask</em> parameter for
turning off all automatic masking.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.8.3</p>
</div>
</dd>
<dt>mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True (the default) then mask by convention the data of
field and metadata constructs.</p>
<p>A netCDF array is masked depending on the values of any of
the netCDF attributes <code class="docutils literal notranslate"><span class="pre">_FillValue</span></code>, <code class="docutils literal notranslate"><span class="pre">missing_value</span></code>,
<code class="docutils literal notranslate"><span class="pre">_Unsigned</span></code>, <code class="docutils literal notranslate"><span class="pre">valid_min</span></code>, <code class="docutils literal notranslate"><span class="pre">valid_max</span></code>, and
<code class="docutils literal notranslate"><span class="pre">valid_range</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.8.2</p>
</div>
</dd>
<dt>unpack: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a></dt><dd><p>If True, the default, then unpack arrays by convention
when the data is read from disk.</p>
<p>Unpacking is determined by netCDF conventions for the
following variable attributes: <code class="docutils literal notranslate"><span class="pre">add_offset</span></code>,
<code class="docutils literal notranslate"><span class="pre">scale_factor</span></code>, and <code class="docutils literal notranslate"><span class="pre">_Unsigned</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</dd>
<dt>domain: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then return only the domain constructs that are
explicitly defined by CF-netCDF domain variables, ignoring
all CF-netCDF data variables. By default only the field
constructs defined by CF-netCDF data variables are
returned.</p>
<p>CF-netCDF domain variables are only defined from CF-1.9,
so older datasets automatically contain no CF-netCDF
domain variables.</p>
<p>The unique domain constructs of the dataset are
found with the <a class="reference internal" href="cfdm.unique_constructs.html#cfdm.unique_constructs" title="cfdm.unique_constructs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.unique_constructs</span></code></a>
function. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;file.nc&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ud</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">unique_constructs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;file.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ufd</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">unique_constructs</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">domain</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.9.0.0</p>
</div>
</dd>
<dt>netcdf_backend: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><p>Specify which library, or libraries, to use for opening
and reading netCDF files. By default, or if <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, then
the first one of <code class="xref py py-obj docutils literal notranslate"><span class="pre">h5netcdf</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">netCDF4</span></code> to successfully
open the netCDF file is used. The libraries will be used
in the order given, until a file is successfully
opened.}</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</dd>
<dt>storage_options: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>Pass parameters to the backend file system driver, such as
username, password, server, port, etc. How the storage
options are interpreted depends on the location of the
file:</p>
<ul>
<li><p><strong>Local File System</strong>: Storage options are ignored for
local files.</p></li>
<li><p><strong>HTTP(S)</strong>: Storage options are ignored for files
available across the network via OPeNDAP.</p></li>
<li><p><strong>S3-compatible services</strong>: The backend used is <code class="xref py py-obj docutils literal notranslate"><span class="pre">s3fs</span></code>,
and the storage options are used to initialise an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">s3fs.S3FileSystem</span></code> file system object. By default, or
if <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, then <em>storage_options</em> is taken as <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">'endpoint_url'</span></code> key is not in
<em>storage_options</em>, nor in a dictionary defined by the
<code class="docutils literal notranslate"><span class="pre">'client_kwargs'</span></code> key (both of which are the case when
<em>storage_options</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>), then one will be
automatically inserted for accessing an S3 file. For
instance, with a file name of
<code class="docutils literal notranslate"><span class="pre">'s3://store/data/file.nc'</span></code>, an <code class="docutils literal notranslate"><span class="pre">'endpoint_url'</span></code> key
with value <code class="docutils literal notranslate"><span class="pre">'https://store'</span></code> would be created. To
disable this, set the <code class="docutils literal notranslate"><span class="pre">'endpoint_url'</span></code> key to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p>For a file name of <code class="docutils literal notranslate"><span class="pre">'s3://store/data/file.nc'</span></code>, the
following are equivalent: <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">{}</span></code>,
<code class="docutils literal notranslate"><span class="pre">{'endpoint_url':</span> <span class="pre">'https://store'}</span></code>, and
<code class="docutils literal notranslate"><span class="pre">{'client_kwargs':</span> <span class="pre">{'endpoint_url':</span>
<span class="pre">'https://store'}}</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'key':</span> <span class="pre">'scaleway-api-key...',</span> <span class="pre">'secret':</span>
<span class="pre">'scaleway-secretkey...',</span> <span class="pre">'endpoint_url':</span>
<span class="pre">'https://s3.fr-par.scw.cloud',</span> <span class="pre">'client_kwargs':</span>
<span class="pre">{'region_name':</span> <span class="pre">'fr-par'}}</span></code></p>
</dd>
</dl>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</dd>
<dt>cache: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True, the default, then cache the first and last array
elements of metadata constructs (not field constructs) for
fast future access. In addition, the second and
penultimate array elements will be cached from coordinate
bounds when there are two bounds per cell. For remote
data, setting <em>cache</em> to False may speed up the parsing of
the file.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</dd>
<dt>dask_chunks: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>Specify the Dask chunking for data. May be one of the
following:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'storage-aligned'</span></code></p>
<p>This is the default. The Dask chunk size in bytes will
be as close as possible the size given by
<code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.chunksize</span></code>, favouring square-like chunk
shapes, with the added restriction that the entirety of
each storage chunk lies within exactly one Dask
chunk. This strategy is general the most performant, as
it ensures that when accessing the data, each storage
chunk is read from disk at most once (as opposed to once
per Dask chunk in which it lies).</p>
<p>For instance, consider a file variable that has an array
of 64-bit floats with shape (400, 300, 60) and a storage
chunk shape of (100, 5, 60). This has an overall size of
54.93 MiB, partitioned into 240 storage chunks each of
size 100*5*60*8 bytes = 0.23 MiB. Then:</p>
<ul class="simple">
<li><p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.chunksize</span></code> returns 134217728 (i.e. 128
MiB), then the storage-aligned Dask chunks will have
shape (400, 300, 60), giving 1 Dask chunk with size of
54.93 MiB (compare with a Dask chunk shape of (400,
300, 60) and size 54.93 MiB when <em>dask_chunks</em> is
<code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.)</p></li>
<li><p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.chunksize</span></code> returns 33554432 (i.e. 32
MiB), then the storage-aligned Dask chunks will have
shape (200, 260, 60), giving 4 Dask chunks with a
maximum size of 23.80 MiB (compare with a Dask chunk
shape of (264, 264, 60) and maximum size 31.90 MiB
when <em>dask_chunks</em> is <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.)</p></li>
<li><p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.chunksize</span></code> returns 4194304 (i.e. 4
MiB), then the storage-aligned Dask chunks will have
shape (100, 85, 60), giving 16 Dask chunks with a
maximum size of 3.89 MiB (compare with a Dask chunk
shape of (93, 93, 60) and maximum size 3.96 MiB when
<em>dask_chunks</em> is <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.)</p></li>
</ul>
<p>There are, however, some occasions when, for particular
data arrays in the file, the <code class="docutils literal notranslate"><span class="pre">'auto'</span></code> option will
automatically be used instead of storage-aligned Dask
chunks. This occurs when:</p>
<ul class="simple">
<li><p>The data array in the file is stored contiguously.</p></li>
<li><p>The data array in the file is compressed by convention
(e.g. ragged array representations, compression by
gathering, subsampled coordinates, etc.). In this case
the Dask chunks are for the uncompressed data, and so
cannot be aligned with the storage chunks of the
compressed array in the file.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">'storage-exact'</span></code></p>
<p>Each Dask chunk will contain exactly one storage chunk
and each storage chunk will lie within exactly one Dask
chunk.</p>
<p>For instance, consider a file variable that has an array
of 64-bit floats with shape (400, 300, 60) and a storage
chunk shape of (100, 5, 60). This has an overall size of
54.93 MiB, partitioned into 240 storage chunks each of
size 100*5*60*8 bytes = 0.23 MiB. The corresponding
storage-exact Dask chunks will also have shape (100, 5,
60), giving 240 Dask chunks with a maximum size of 0.23
MiB.</p>
<p>There are, however, some occasions when, for particular
data arrays in the file, the <code class="docutils literal notranslate"><span class="pre">'auto'</span></code> option will
automatically be used instead of storage-exact Dask
chunks. This occurs when:</p>
<ul class="simple">
<li><p>The data array in the file is stored contiguously.</p></li>
<li><p>The data array in the file is compressed by convention
(e.g. ragged array representations, compression by
gathering, subsampled coordinates, etc.). In this case
the Dask chunks are for the uncompressed data, and so
cannot be aligned with the storage chunks of the
compressed array in the file.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code></p>
<p>The Dask chunk size in bytes will be as close as
possible to the size given by <code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.chunksize</span></code>,
favouring square-like chunk shapes. This may give
similar Dask chunk shapes as the <code class="docutils literal notranslate"><span class="pre">'storage-aligned'</span></code>
option, but without the guarantee that each storage
chunk will lie within exactly one Dask chunk.</p>
</li>
<li><p>A byte-size given by a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p>
<p>The Dask chunk size in bytes will be as close as
possible to the given byte-size, favouring square-like
chunk shapes. Any string value, accepted by the <em>chunks</em>
parameter of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask.array.from_array</span></code> function is
permitted.</p>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p>A Dask chunksize of 2 MiB may be specified as
<code class="docutils literal notranslate"><span class="pre">'2097152'</span></code> or <code class="docutils literal notranslate"><span class="pre">'2</span> <span class="pre">MiB'</span></code>.</p>
</dd>
</dl>
</li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">-1</span></code> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
<p>There is no Dask chunking, i.e. every data array has one
Dask chunk regardless of its size.</p>
</li>
<li><p>Positive <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p>
<p>Every dimension of all Dask chunks has this number of
elements.</p>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p>For 3-dimensional data, <em>dask_chunks</em> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">10</span></code> will
give Dask chunks with shape (10, 10, 10).</p>
</dd>
</dl>
</li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
<p>Each of dictionary key identifies a file dimension, with
a value that defines the Dask chunking for that
dimension whenever it is spanned by a data array. A file
dimension is identified in one of three ways:</p>
<ol class="arabic simple">
<li><p>the netCDF dimension name, preceded by <code class="docutils literal notranslate"><span class="pre">ncdim%</span></code></p></li>
</ol>
<blockquote>
<div><p>(e.g. <code class="docutils literal notranslate"><span class="pre">'ncdim%lat'</span></code>);</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>the value of the “standard name” attribute of a
CF-netCDF coordinate variable that spans the
dimension (e.g. <code class="docutils literal notranslate"><span class="pre">'latitude'</span></code>);</p></li>
<li><p>the value of the “axis” attribute of a CF-netCDF
coordinate variable that spans the dimension
(e.g. <code class="docutils literal notranslate"><span class="pre">'Y'</span></code>).</p></li>
</ol>
<p>The dictionary values may be a byte-size string,
<code class="docutils literal notranslate"><span class="pre">'auto'</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, with the same meanings as
those types for the <em>dask_chunks</em> parameter itself, but
applying only to the specified dimension. In addition, a
dictionary value may be a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of integers
that sum to the dimension size.</p>
<p>Not specifying a file dimension in the dictionary is
equivalent to it being defined with a value of
<code class="docutils literal notranslate"><span class="pre">'auto'</span></code>.</p>
<dl>
<dt><em>Example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'T':</span> <span class="pre">'0.5</span> <span class="pre">MiB',</span> <span class="pre">'Z':</span> <span class="pre">'auto',</span> <span class="pre">'Y':</span> <span class="pre">[36,</span> <span class="pre">37],</span> <span class="pre">'X':</span>
<span class="pre">None}</span></code></p>
</dd>
<dt><em>Example:</em></dt><dd><p>If a netCDF file contains dimensions <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>,
<code class="docutils literal notranslate"><span class="pre">lat</span></code> and <code class="docutils literal notranslate"><span class="pre">lon</span></code>, then <code class="docutils literal notranslate"><span class="pre">{'ncdim%time':</span> <span class="pre">12,</span>
<span class="pre">'ncdim%lat',</span> <span class="pre">None,</span> <span class="pre">'ncdim%lon':</span> <span class="pre">None}</span></code> will ensure
that, for all applicable data arrays, all <code class="docutils literal notranslate"><span class="pre">time</span></code>
axes have a <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code> chunksize of 12; all <code class="docutils literal notranslate"><span class="pre">lat</span></code> and
<code class="docutils literal notranslate"><span class="pre">lon</span></code> axes are not <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code> chunked; and all <code class="docutils literal notranslate"><span class="pre">z</span></code>
axes are <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code> chunked to comply as closely as
possible with the default <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code> chunk size.</p>
<p>If the netCDF file also contains a <code class="docutils literal notranslate"><span class="pre">time</span></code> coordinate
variable with a “standard_name” attribute of
<code class="docutils literal notranslate"><span class="pre">'time'</span></code> or “axis” attribute of <code class="docutils literal notranslate"><span class="pre">'T'</span></code>, then the
same <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code> chunking could be specified with either
<code class="docutils literal notranslate"><span class="pre">{'time':</span> <span class="pre">12,</span> <span class="pre">'ncdim%lat',</span> <span class="pre">None,</span> <span class="pre">'ncdim%lon':</span> <span class="pre">None}</span></code>
or <code class="docutils literal notranslate"><span class="pre">{'T':</span> <span class="pre">12,</span> <span class="pre">'ncdim%lat',</span> <span class="pre">None,</span> <span class="pre">'ncdim%lon':</span>
<span class="pre">None}</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</li>
</ul>
</dd>
<dt>store_dataset_chunks: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True (the default) then store the dataset chunking
strategy for each returned data array. The dataset
chunking strategy is then accessible via an object’s
<code class="xref py py-obj docutils literal notranslate"><span class="pre">nc_hdf5_chunksizes</span></code> method. When the dataset chunking
strategy is stored, it will be used when the data is
written to a new netCDF4 file with <a class="reference internal" href="cfdm.write.html#cfdm.write" title="cfdm.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.write</span></code></a>
(unless the strategy is modified prior to writing).</p>
<p>If False, or if the dataset format does not support
chunking, then no dataset chunking strategy is stored.
(i.e. an <code class="xref py py-obj docutils literal notranslate"><span class="pre">nc_hdf5_chunksizes</span></code> method will return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
for all <a class="reference internal" href="../class/cfdm.Data.html#cfdm.Data" title="cfdm.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a> objects). In this case, when the data is
written to a new netCDF4 file, the dataset chunking
strategy will be determined by <a class="reference internal" href="cfdm.write.html#cfdm.write" title="cfdm.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.write</span></code></a>.</p>
<p>See the <a class="reference internal" href="cfdm.write.html#cfdm.write" title="cfdm.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cfdm.write</span></code></a> <em>hdf5_chunks</em> parameter for
details on how the dataset chunking strategy is determined
at the time of writing.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.11.2.0</p>
</div>
</dd>
<dt>cfa: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>Configure the reading of CF-netCDF aggregation files.</p>
<p>The dictionary may have any subset of the following
key/value pairs that supplement or override the
information read from the file:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'replace_directory'</span></code>: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
<p>A dictionary whose key/value pairs define modifications
to be applied to the directories of the fragment file
locations. The dictionary comprises keyword arguments to
the cfdm.Data.replace_directory` method, which is
used to make the the changes. The aggregation file being
read is unaltered. An empty dictionary results in no
modifications.</p>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p>Replace a leading <code class="docutils literal notranslate"><span class="pre">data/model</span></code> with <code class="docutils literal notranslate"><span class="pre">home</span></code>,
wherever it occurs: <code class="docutils literal notranslate"><span class="pre">{'replace_directory':</span> <span class="pre">{'old':</span>
<span class="pre">'data/model',</span> <span class="pre">'new':</span> <span class="pre">'home'}}</span></code></p>
</dd>
<dt><em>Example:</em></dt><dd><p>Normalise all file locations and replace a leading
<code class="docutils literal notranslate"><span class="pre">/archive</span></code> with <code class="docutils literal notranslate"><span class="pre">/data/obs</span></code>, wherever it occurs:
<code class="docutils literal notranslate"><span class="pre">{'replace_directory':</span> <span class="pre">{'old':</span> <span class="pre">'/archive',</span> <span class="pre">'new':</span>
<span class="pre">'/data/obs',</span> <span class="pre">'normalise':</span> <span class="pre">True}}</span></code></p>
</dd>
<dt><em>Example:</em></dt><dd><p>Normalise all file locations and remove a leading
<code class="docutils literal notranslate"><span class="pre">/data`,</span> <span class="pre">wherever</span> <span class="pre">it</span> <span class="pre">occurs:</span> <span class="pre">``{'replace_directory':</span>
<span class="pre">{'old':</span> <span class="pre">'/data',</span> <span class="pre">'normalise':</span> <span class="pre">True}}</span></code>.</p>
</dd>
</dl>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>cfa_write: (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><p>Register the intention for named construct types to be
subsequently written as CF-netCDF aggregation variables.</p>
<p>This makes no difference to the logical content of any
construct, but ensures that the data of each of specified
construct types will have only one Dask chunk, regardless
of the setting of <em>dask_chunks</em>, which is a requirement
for the creation CF-netCDF aggregation variables.</p>
<p>The <em>cfa_write</em> parameter may be one, or a sequence, of:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>cfa_write</em></p></th>
<th class="head"><p>Construct types</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'field'</span></code></p></td>
<td><p>Field constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'field_ancillary'</span></code></p></td>
<td><p>Field ancillary constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'domain_ancillary'</span></code></p></td>
<td><p>Domain ancillary constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'dimension_coordinate'</span></code></p></td>
<td><p>Dimension coordinate constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'auxiliary_coordinate'</span></code></p></td>
<td><p>Auxiliary coordinate constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'cell_measure'</span></code></p></td>
<td><p>Cell measure constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'domain_topology'</span></code></p></td>
<td><p>Domain topology constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'cell_connectivity'</span></code></p></td>
<td><p>Cell connectivity constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'all'</span></code></p></td>
<td><p>All constructs</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <em>dask_chunks</em> parameter is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
or <code class="docutils literal notranslate"><span class="pre">-1</span></code> then the data of all constructs will
already have only one Dask chunk, so in this
case setting <em>cfa_write</em> will have no further
effect.</p>
</div>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p>To register field constructs to be written as CF-netCDF
aggregation variables: <code class="docutils literal notranslate"><span class="pre">cfa_write='field'</span></code> or
<code class="docutils literal notranslate"><span class="pre">cfa_write=['field']</span></code>.</p>
</dd>
<dt><em>Example:</em></dt><dd><p>To register field and auxiliary coordinate constructs to
be written as CF-netCDF aggregation variables:
<code class="docutils literal notranslate"><span class="pre">cfa_write=['field',</span> <span class="pre">'auxiliary_coordinate']</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>to_memory: (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><p>Read all data arrays of the named construct types into
memory. By default, lazy loading is employed for all data
arrays.</p>
<p>The <em>to_memory</em> parameter may be one, or a sequence, of:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>to_memory</em></p></th>
<th class="head"><p>Construct types</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'all'</span></code></p></td>
<td><p>All constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'metadata'</span></code></p></td>
<td><p>All metadata constructs (i.e.
all constructs except Field
constructs)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'field'</span></code></p></td>
<td><p>Field constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'field_ancillary'</span></code></p></td>
<td><p>Field ancillary constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'domain_ancillary'</span></code></p></td>
<td><p>Domain ancillary constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'dimension_coordinate'</span></code></p></td>
<td><p>Dimension coordinate constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'auxiliary_coordinate'</span></code></p></td>
<td><p>Auxiliary coordinate constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'cell_measure'</span></code></p></td>
<td><p>Cell measure constructs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'domain_topology'</span></code></p></td>
<td><p>Domain topology constructs</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'cell_connectivity'</span></code></p></td>
<td><p>Cell connectivity constructs</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p>To read field construct data arrays into memory:
<code class="docutils literal notranslate"><span class="pre">to_memory='field'</span></code> or <code class="docutils literal notranslate"><span class="pre">to_memory=['field']</span></code>.</p>
</dd>
<dt><em>Example:</em></dt><dd><p>To read field and auxiliary coordinate construct data
arrays into memory: <code class="docutils literal notranslate"><span class="pre">to_memory=['field',</span>
<span class="pre">'auxiliary_coordinate']</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>squeeze: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then remove all size 1 dimensions from field
construct data arrays, regardless of how the data are
stored in the dataset. If False (the default) then the
presence or not of size 1 dimensions is determined by how
the data are stored in its dataset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>unsqueeze: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then ensure that field construct data arrays span
all of the size 1 dimensions, regardless of how the data
are stored in the dataset. If False (the default) then the
presence or not of size 1 dimensions is determined by how
the data are stored in its dataset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>file_type: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or (sequence of) <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional</dt><dd><blockquote>
<div><p>Only read files of the given type(s). All other file
types are ignored. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default) then files of
any valid type are read. If there are no files of the
given type(s), or <em>file_type</em> is empty sequence, then an
empty list is returned.</p>
</div></blockquote>
<p>Valid files types are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><em>file_type</em></p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'netCDF'</span></code></p></td>
<td><p>Binary netCDF-3 or netCDF-4 file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'CDL'</span></code></p></td>
<td><p>Text CDL representation of a netCDF file</p></td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
<dt>ignore_unknown_type: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><blockquote>
<div><p>If True then ignore any file which does not have one of
the valid types specified by the <em>file_type</em>
parameter. If False (the default) then attempting to read
a file with an unrecognised type will result in an
error.</p>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">New in version (cfdm): </span>1.12.0.0</p>
</div>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference internal" href="../class/cfdm.Field.html#cfdm.Field" title="cfdm.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference internal" href="../class/cfdm.Domain.html#cfdm.Domain" title="cfdm.Domain"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code></a></dt><dd><p>The field constructs found in the dataset, or the domain
constructs if <em>domain</em> is True. The list may be empty.</p>
</dd>
</dl>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;file.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="go">&lt;type &#39;list&#39;&gt;</span>
</pre></div>
</div>
<p>Read a file and create field constructs from CF-netCDF data
variables as well as from the netCDF variables that correspond to
particular types metadata constructs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;file.nc&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s1">&#39;domain_ancillary&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;file.nc&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;dimension_coordinate&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="s1">&#39;auxiliary_coordinate&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Read a file that contains external variables:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;parent.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;parent.nc&#39;</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="s1">&#39;external.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">cfdm</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;parent.nc&#39;</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;external1.nc&#39;</span><span class="p">,</span> <span class="s1">&#39;external2.nc&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</section>



          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2025, NCAS | Page built on 2025-03-18.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>