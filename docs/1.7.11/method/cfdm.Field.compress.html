
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cfdm.Field.compress &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cfdm.Field.copy" href="cfdm.Field.copy.html" />
    <link rel="prev" title="cfdm.Field.domain" href="../attribute/cfdm.Field.domain.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><b><a href="../index.html">cfdm 1.7.11</a></b></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>cfdm tutorial</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../functions.html"><strong>cfdm functions</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../constant.html"><strong>cfdm constants</strong></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../class.html"><strong>cfdm classes</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../class_core.html"><strong>cfdm.core classes</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../subclassing.html"><strong>Subclassing</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../philosophy.html"><strong>Philosophy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html"><strong>Versioning</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Older releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cfdm classes</strong></a><ul>
  <li><a href="../class/cfdm.Field.html">cfdm.Field</a><ul>
      <li>Previous: <a href="../attribute/cfdm.Field.domain.html" title="previous chapter">cfdm.Field.domain</a></li>
      <li>Next: <a href="cfdm.Field.copy.html" title="next chapter">cfdm.Field.copy</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/method/cfdm.Field.compress.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cfdm-field-compress">
<h1>cfdm.Field.compress<a class="headerlink" href="#cfdm-field-compress" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cfdm.Field.compress">
<code class="descclassname">Field.</code><code class="descname">compress</code><span class="sig-paren">(</span><em>method</em>, <em>axes=None</em>, <em>count_properties=None</em>, <em>index_properties=None</em>, <em>list_properties=None</em>, <em>inplace=False</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cfdm/blob/v1.7.11/cfdm/field.py#L485"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cfdm.Field.compress" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress the field construct.</p>
<p>Compression can save space by identifying and removing unwanted
missing data. Such compression techniques store the data more
efficiently and result in no precision loss.</p>
<p>The field construct data is compressed, along with any applicable
metadata constructs.</p>
<p>Whether or not the field construct is compressed does not alter
its functionality nor external appearance.</p>
<p>A field that is already compressed will returned compressed by the
chosen method.</p>
<p>When writing a compressed field construct to a dataset space will
be saved by the creation of compressed netCDF variables, along
with the supplementary netCDF variables and attributes that are
required for the encoding.</p>
<p>The following type of compression are available (see the <em>method</em>
parameter):</p>
<blockquote>
<div><ul class="simple">
<li>Ragged arrays for discrete sampling geometries (DSG). Three
different types of ragged array representation are
supported.</li>
</ul>
<ul class="simple">
<li>Compression by gathering.</li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.7.11.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="cfdm.Field.uncompress.html#cfdm.Field.uncompress" title="cfdm.Field.uncompress"><code class="xref py py-obj docutils literal notranslate"><span class="pre">uncompress</span></code></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>method: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></dt>
<dd><p class="first">The compression method. One of:</p>
<ul class="last">
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'contiguous'</span></code></p>
<p>Contiguous ragged array representation for DSG “point”,
“timeSeries”, “trajectory” or “profile” features.</p>
<p>The field construct data must have exactly 2 dimensions
for which the first (leftmost) dimension indexes each
feature and the second (rightmost) dimension contains
the elements for the features. Trailing missing data
values in the second dimension are removed to created
the compressed data.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'indexed'</span></code></p>
<p>Indexed ragged array representation for DSG “point”,
“timeSeries”, “trajectory”, or “profile” features.</p>
<p>The field construct data must have exactly 2 dimensions
for which the first (leftmost) dimension indexes each
feature and the second (rightmost) dimension contains
the elements for the features. Trailing missing data
values in the second dimension are removed to created
the compressed data.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'indexed_contiguous'</span></code></p>
<p>Indexed contiguous ragged array representation for DSG
“timeSeriesProfile”, or “trajectoryProfile” features.</p>
<p>The field construct data must have exactly 3 dimensions
for which the first (leftmost) dimension indexes each
feature; the second (middle) dimension indexes each
timeseries or trajectory; and the third (rightmost)
dimension contains the elements for the timeseries or
trajectories. Trailing missing data values in the third
dimension are removed to created the compressed data.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">'gathered'</span></code></p>
<p>Compression by gathering over any subset of the field
construct data dimensions.</p>
<p><em>Not yet available.</em></p>
</li>
</ul>
</dd>
<dt>count_properties: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt>
<dd><p class="first">Provide properties to the count variable for contiguous
ragged array representation or indexed contiguous ragged
array representation.</p>
<dl class="last docutils">
<dt><em>Parameter example:</em></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">count_properties={'long_name':</span> <span class="pre">'number</span> <span class="pre">of</span> <span class="pre">timeseries'}</span></code></p>
</dd>
</dl>
</dd>
<dt>index_properties: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt>
<dd><p class="first">Provide properties to the index variable for indexed
ragged array representation or indexed contiguous ragged
array representation.</p>
<dl class="last docutils">
<dt><em>Parameter example:</em></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">index_properties={'long_name':</span> <span class="pre">'station</span> <span class="pre">of</span> <span class="pre">profile'}</span></code></p>
</dd>
</dl>
</dd>
<dt>list_properties: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt>
<dd><p class="first">Provide properties to the list variable for compression by
gathering.</p>
<dl class="last docutils">
<dt><em>Parameter example:</em></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">list_properties={'long_name':</span> <span class="pre">'uncompression</span> <span class="pre">indices'}</span></code></p>
</dd>
</dl>
</dd>
<dt>inplace: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then do the operation in-place and return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><a class="reference internal" href="../class/cfdm.Field.html#cfdm.Field" title="cfdm.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></dt>
<dd><p class="first last">The compressed field construct, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the operation
was in-place.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_compression_type</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[3.98  0.0  0.0  --    --   --   --  --  --]</span>
<span class="go"> [ 0.0  0.0  0.0  3.4  0.0  0.0 4.61  --  --]</span>
<span class="go"> [0.86  0.8 0.75  0.0 4.56   --   --  --  --]</span>
<span class="go"> [ 0.0 0.09  0.0 0.91 2.96 1.14 3.86 0.0 0.0]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="s1">&#39;contiguous&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfdm</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;compressed_file_contiguous.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_compression_type</span><span class="p">()</span>
<span class="go">&#39;ragged contiguous&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>                   
<span class="go">&lt;CF Count: (4) &gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[3 7 5 9]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="s1">&#39;indexed&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_index</span><span class="p">()</span>
<span class="go"> &lt;CF Index: (24) &gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_index</span><span class="p">()</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[0 0 0 1 1 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfdm</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;compressed_file_indexed.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, David Hassell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/method/cfdm.Field.compress.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>