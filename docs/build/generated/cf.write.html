
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cf.write &#8212; Documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
  <li><a target="_blank" href="../../archive.html">Archive</a> &laquo;</li>
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python 0.1</a> &raquo;</li>
<!--
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python</a> &raquo;</li>
  <li><select onchange="location = this.options[this.selectedIndex].value;">

      <option value="../../1.0/index.html">1.0

      <option value="../../0.9.9/index.html">0.9.9

      <option value="../../0.9.8.3/index.html">0.9.8.3

      <option value="../../archive.html">Archive

      </select>
  </li>
-->
  
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cf-write">
<h1>cf.write<a class="headerlink" href="#cf-write" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="cf.write">
<code class="descclassname">cf.</code><code class="descname">write</code><span class="sig-paren">(</span><em>fields</em>, <em>filename</em>, <em>fmt=’NETCDF3_CLASSIC’</em>, <em>overwrite=True</em>, <em>verbose=False</em>, <em>cfa_options=None</em>, <em>mode=’w’</em>, <em>least_significant_digit=None</em>, <em>endian=’native’</em>, <em>compress=0</em>, <em>fletcher32=False</em>, <em>no_shuffle=False</em>, <em>datatype=None</em>, <em>single=False</em>, <em>double=False</em>, <em>reference_datetime=None</em>, <em>variable_attributes=None</em>, <em>HDF_chunksizes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cf.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write fields to a CF-netCDF or CFA-netCDF file.</p>
<p>NetCDF dimension and variable names will be taken from variables’
<code class="xref py py-obj docutils literal"><span class="pre">ncvar</span></code> attributes and the domain attribute
<code class="xref py py-obj docutils literal"><span class="pre">nc_dimensions</span></code> if present, otherwise they are inferred from
standard names or set to defaults. NetCDF names may be automatically
given a numerical suffix to avoid duplication.</p>
<p>Output netCDF file global properties are those which occur in the set
of CF global properties and non-standard data variable properties and
which have equal values across all input fields.</p>
<p>Logically identical field components are only written to the file
once, apart from when they need to fulfil both dimension coordinate
and auxiliary coordinate roles for different data variables.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="cf.read.html#cf.read" title="cf.read"><code class="xref py py-obj docutils literal"><span class="pre">cf.read</span></code></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>fields <span class="classifier-delimiter">:</span> <span class="classifier">(arbitrarily nested sequence of) cf.Field or cf.FieldList</span></dt>
<dd><p class="first last">The field or fields to write to the file.</p>
</dd>
<dt>filename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first">The output netCDF file. Various type of expansion are applied
to the file names:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Expansion</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Tilde</td>
<td>An initial component of <code class="docutils literal"><span class="pre">~</span></code> or
<code class="docutils literal"><span class="pre">~user</span></code> is replaced by that <em>user</em>’s
home directory.</td>
</tr>
<tr class="row-odd"><td>Environment variable</td>
<td>Substrings of the form <code class="docutils literal"><span class="pre">$name</span></code> or
<code class="docutils literal"><span class="pre">${name}</span></code> are replaced by the value
of environment variable <em>name</em>.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Where more than one type of expansion is used in the same
string, they are applied in the order given in the above
table.</p>
<blockquote class="last">
<div><p>Example: If the environment variable <em>MYSELF</em> has been set
to the “david”, then <code class="docutils literal"><span class="pre">'~$MYSELF/out.nc'</span></code> is equivalent to
<code class="docutils literal"><span class="pre">'~david/out.nc'</span></code>.</p>
</div></blockquote>
</dd>
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first">The format of the output file. One of:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">fmt</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'NETCDF3_CLASSIC'</span></code></td>
<td>Output to a CF-netCDF3 classic format file</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'NETCDF3_64BIT'</span></code></td>
<td>Output to a CF-netCDF3 64-bit offset format file</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'NETCDF4_CLASSIC'</span></code></td>
<td>Output to a CF-netCDF4 classic format file</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'NETCDF4'</span></code></td>
<td>Output to a CF-netCDF4 format file</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'CFA3'</span></code></td>
<td>Output to a CFA-netCDF3 classic format file</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'CFA4'</span></code></td>
<td>Output to a CFA-netCDF4 format file</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">By default the <em>fmt</em> is <code class="docutils literal"><span class="pre">'NETCDF3_CLASSIC'</span></code>. Note that the
netCDF3 formats may be slower than any of the other options.</p>
</dd>
<dt>overwrite: bool, optional</dt>
<dd><p class="first last">If False then raise an exception if the output file
pre-exists. By default a pre-existing output file is over
written.</p>
</dd>
<dt>verbose <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If True then print one-line summaries of each field written.</p>
</dd>
<dt>cfa_options <span class="classifier-delimiter">:</span> <span class="classifier">dict, optional</span></dt>
<dd><p class="first">A dictionary giving parameters for configuring the output
CFA-netCDF file:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'base'</span></code></td>
<td><ul class="first last simple">
<li>If <code class="docutils literal"><span class="pre">None</span></code> (the default) then file names
within CFA-netCDF files are stored with
absolute paths.</li>
<li>If set to an empty string then file names
within CFA-netCDF files are given relative to
the directory or URL base containing the
output CFA-netCDF file.</li>
<li>If set to a string then file names within
CFA-netCDF files are given relative to the
directory or URL base described by the
value. For example: <code class="docutils literal"><span class="pre">'../archive'</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">By default no parameters are specified.</p>
</dd>
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first">Specify the mode of write access for the output file. One of:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">mode</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'w'</span></code></td>
<td>Open a new file for writing to. If it exists and
<em>overwrite</em> is True then the file is deleted prior to
being recreated.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">By default the file is opened with write access mode <code class="docutils literal"><span class="pre">'w'</span></code>.</p>
</dd>
<dt>endian <span class="classifier-delimiter">:</span> <span class="classifier">str, optional</span></dt>
<dd><p class="first last">The endian-ness of the output file. Valid values are
<code class="docutils literal"><span class="pre">'little'</span></code>, <code class="docutils literal"><span class="pre">'big'</span></code> or <code class="docutils literal"><span class="pre">'native'</span></code>. By default the output
is native endian.</p>
</dd>
<dt>compress <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Regulate the speed and efficiency of compression. Must be an
integer between <code class="docutils literal"><span class="pre">0</span></code> and <code class="docutils literal"><span class="pre">9</span></code>. <code class="docutils literal"><span class="pre">0</span></code> means no compression;
<code class="docutils literal"><span class="pre">1</span></code> is the fastest, but has the lowest compression ratio;
<code class="docutils literal"><span class="pre">9</span></code> is the slowest but best compression ratio. The default
value is <code class="docutils literal"><span class="pre">0</span></code>. An exception is raised if compression is
requested for a netCDF3 output file format.</p>
</dd>
<dt>least_significant_digit <span class="classifier-delimiter">:</span> <span class="classifier">int, optional</span></dt>
<dd><p class="first last">Truncate the input field data arrays. For a positive integer,
N the precision that is retained in the compressed data is ‘10
to the power -N’. For example, a value of <code class="docutils literal"><span class="pre">2</span></code> will retain a
precision of 0.01. In conjunction with the <em>compress</em>
parameter this produces ‘lossy’, but significantly more
efficient compression.</p>
</dd>
<dt>fletcher32 <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If True then the Fletcher-32 HDF5 checksum algorithm is
activated to detect compression errors. Ignored if <em>compress</em>
is <code class="docutils literal"><span class="pre">0</span></code>.</p>
</dd>
<dt>no_shuffle <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">If True then the HDF5 shuffle filter (which de-interlaces a
block of data before compression by reordering the bytes by
storing the first byte of all of a variable’s values in the
chunk contiguously, followed by all the second bytes, and so
on) is turned off. By default the filter is applied because if
the data array values are not all wildly different, using the
filter can make the data more easily compressible.  Ignored if
<em>compress</em> is <code class="docutils literal"><span class="pre">0</span></code>.</p>
</dd>
<dt>datatype <span class="classifier-delimiter">:</span> <span class="classifier">dict, optional</span></dt>
<dd><p class="first">Specify data type conversions to be applied prior to writing
data to disk. Arrays with data types which are not specified
remain unchanged. By default, input data types are
preserved. Data types defined by <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.13)"><code class="xref py py-obj docutils literal"><span class="pre">numpy.dtype</span></code></a> objects in a
dictionary whose are input data types with values of output
data types.</p>
<blockquote class="last">
<div><dl class="docutils">
<dt><strong>Example:</strong></dt>
<dd><p class="first last">To convert 64-bit floats and 64-bit integers to their
32-bit counterparts: <code class="docutils literal"><span class="pre">datatype={numpy.dtype('float64'):</span>
<span class="pre">numpy.dtype('float32'),</span> <span class="pre">numpy.dtype('int64'):</span>
<span class="pre">numpy.dtype('int32')}</span></code>.</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>single <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Write 64-bit floats as 32-bit floats and 64-bit integers as
32-bit integers. By default, input data types are
preserved. Note that <code class="docutils literal"><span class="pre">single=True</span></code> is exactly equivalent to
<code class="docutils literal"><span class="pre">datatype={numpy.dtype('float64'):</span> <span class="pre">numpy.dtype('float32'),</span>
<span class="pre">numpy.dtype('int64'):</span> <span class="pre">numpy.dtype('int32')}</span></code>.</p>
</dd>
<dt>double <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">Write 32-bit floats as 64-bit floats and 32-bit integers as
64-bit integers. By default, input data types are
preserved. Note that <code class="docutils literal"><span class="pre">double=True</span></code> is exactly equivalent to
<code class="docutils literal"><span class="pre">datatype={numpy.dtype('float32'):</span> <span class="pre">numpy.dtype('float64'),</span>
<span class="pre">numpy.dtype('int32'):</span> <span class="pre">numpy.dtype('int64')}</span></code>.</p>
</dd>
<dt>HDF_chunksizes <span class="classifier-delimiter">:</span> <span class="classifier">dict, optional</span></dt>
<dd><p class="first">Manually specify HDF5 chunks for the field data arrays.</p>
<p>Chunking refers to a storage layout where a data array is
partitioned into fixed-size multi-dimensional chunks when
written to a netCDF4 file on disk. Chunking is ignored if the
field is written to a netCDF3 format file.</p>
<p>A chunk has the same rank as the data array, but with fewer
(or no more) elements along each axes. The chunk is defined by
a dictionary whose keys identify axes with values of the
chunks size for those axes.</p>
<p>If a given chunk size for an axis is larger than the axis size
for any field, then the size of the axis at the time of
writing to disk will be used instead.</p>
<p>If chunk sizes have been specified for some but not all axes,
then the each unset chunk size is assumed to be the full size
of the axis for each field.</p>
<p>If no chunk sizes have been set for any axes then the netCDF
default chunk is used
(<a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf_perf_chunking.html">http://www.unidata.ucar.edu/software/netcdf/docs/netcdf_perf_chunking.html</a>).</p>
<p>If any chunk sizes have already been set on a field with the
<code class="xref py py-obj docutils literal"><span class="pre">cf.Field.HDF_chunks</span></code> method then these are used in instead.</p>
<p class="last">A detailed discussion of HDF chunking and I/O performance is
available at
<a class="reference external" href="https://www.hdfgroup.org/HDF5/doc/H5.user/Chunking.html">https://www.hdfgroup.org/HDF5/doc/H5.user/Chunking.html</a> and
<a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/workshops/2011/nc4chunking">http://www.unidata.ucar.edu/software/netcdf/workshops/2011/nc4chunking</a>.
Basically, you want the chunks for each dimension to match as
closely as possible the size and shape of the data block that
users will read from the file.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first docutils">
<dt>IOError :</dt>
<dd><p class="first last">If <em>overwrite</em> is False and the output file pre-exists.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Examples:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">[&lt;CF Field: air_pressure(30, 24)&gt;,</span>
<span class="go"> &lt;CF Field: u_compnt_of_wind(19, 29, 24)&gt;,</span>
<span class="go"> &lt;CF Field: v_compnt_of_wind(19, 29, 24)&gt;,</span>
<span class="go"> &lt;CF Field: potential_temperature(19, 30, 24)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write</span><span class="p">(</span><span class="n">f</span>
</pre></div>
</div>
<blockquote>
<div>, ‘file’)</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">&lt;clas</span>
</pre></div>
</div>
<blockquote>
<div>s ‘cf.field.FieldList’&gt;</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&lt;clas</span>
</pre></div>
</div>
<blockquote>
<div>s ‘cf.field.Field’&gt;</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span><span class="o">.</span><span class="n">write</span><span class="p">([</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">],</span> <span class="s1">&#39;file.nc&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">[&lt;CF Field: air_pressure(30, 24)&gt;,</span>
<span class="go"> &lt;CF Field: u_compnt_of_wind(19, 29, 24)&gt;,</span>
<span class="go"> &lt;CF Field: v_compnt_of_wind(19, 29, 24)&gt;,</span>
<span class="go"> &lt;CF Field: potential_temperature(19, 30, 24)&gt;]</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/generated/cf.write.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
  <li><a target="_blank" href="../../archive.html">Archive</a> &laquo;</li>
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python 0.1</a> &raquo;</li>
<!--
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python</a> &raquo;</li>
  <li><select onchange="location = this.options[this.selectedIndex].value;">

      <option value="../../1.0/index.html">1.0

      <option value="../../0.9.9/index.html">0.9.9

      <option value="../../0.9.8.3/index.html">0.9.8.3

      <option value="../../archive.html">Archive

      </select>
  </li>
-->
  
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, David Hassell.
      Last updated on Oct 04, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.2.
    </div>
  </body>
</html>